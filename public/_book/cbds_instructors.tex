\documentclass[]{book}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={Instructor Resources for Chromebook Data Science},
            pdfauthor={Aboozar Hadavand},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{natbib}
\bibliographystyle{apalike}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\providecommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{Instructor Resources for Chromebook Data Science}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Aboozar Hadavand}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{February 2019}

\usepackage{booktabs}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{what-is-this-book}{%
\chapter*{What is this book}\label{what-is-this-book}}
\addcontentsline{toc}{chapter}{What is this book}

\textbf{Note:} If you would like to contribute to the instructor resources, please contribute \url{here}. If you have any questions or comments about this guide, you can contact us \href{http://jhudatascience.org/chromebookdatascience/contact.html}{here}.

The following book provides additional resources to instructors who use Chromebook Data Science MOOCs as part of their curriculum for teaching data science. Chromebook Data Science is a result of a team of data scientists and biostatisticians at Johns Hopkins University School of Public Health.

Chromebook Data Science (CBDS) is a free, massive open online educational offered through \href{https://leanpub.com/universities/set/jhu/chromebook-data-science}{Leanpub} to help anyone who can read, write, and use a computer to move into data science. CBDS lets students do data science using only a web browser and cheap computers like \href{https://www.google.com/chromebook}{Chromebooks}.

CBDS program is entirely online and students can take it for free. Students get a certificate for each CBDS online class from Leanpub. There are currently 12 courses that are offered in the Chromebook Data Science Curriculum. Courses can be assigned as homeworks and therefore the teacher can flip the classroom and use the class time to work on projects and answering questions. However, the instructor can also use the class time to have students take the courses depending on tastes and school resources.

\begin{longtable}[]{@{}lll@{}}
\toprule
\begin{minipage}[b]{0.26\columnwidth}\raggedright
Course\strut
\end{minipage} & \begin{minipage}[b]{0.54\columnwidth}\raggedright
Course Description\strut
\end{minipage} & \begin{minipage}[b]{0.12\columnwidth}\raggedright
Leanpub Link\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{Introduction to Chromebook Data Science}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
This is the first class in the Chromebook Data Science series. Data science is one of the most exciting and fastest growing careers in the world. The goal of this series is to help people with no background and limited resources transition into data science. The only pre-requisites are a computer with a web browser and the ability to type and follow instructions. We guide you through the rest.\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-intro}{Course 0}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{How to Use A Chromebook}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
This course will introduce you to using a Chromebook. The Introduction and Setup course might sound simple, but it will set up the infrastructure for success with the later, more challenging courses.\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-chromebook}{Course 1}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{Google and the Cloud}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
The Google and the Cloud course introduces using Google's in-built apps, which form the fundamental backbone of a Chromebook. We'll go step by step through the process to integrating these apps together to form your productivity workflow.\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-google}{Course 2}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{Organizing Data Science Projects}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Projects are central to the role of any data scientist. These lessons will discuss how to organize projects and the files that are part of each project and will introduce you to Markdown, a simple way to compile text documents to a standard format.\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-organizing}{Course 3}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{Version Control}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Github is the world's most popular version control website. With GitHub and Markdown, they provide a powerful way for you to get your code out to the world. In this course, we will tour GitHub, discussing the basic features of the website, what a repository is, and how to work with repositories on GitHub.\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-version-control}{Course 4}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{Introduction to R}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
R is a simple to learn programming language that is powerful for data analysis. The R Basics course will teach you how to get started from ground zero. We will discuss what objects and packages are, introduce some basic R commands, and discuss RMarkdown, which you will use to write all your reports and to develop a personal website.\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-intro-r}{Course 5}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{Data Tidying}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
This course will focus on how to organize and tidy data sets in R, this is the first step most data scientist's do before analyzing data!\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-tidying}{Course 6}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{Data Visualization}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
This course will cover the different types of visualation most commonly used by data scientists as well as how to make these different plots in R. We will cover how to make basic tables and figures as well as how to make interactive graphics.\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-visualization}{Course 7}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{Getting Data}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
Data is often misunderstood in both subject and application. The Data course will focus on understanding what data is, what the data you'll encounter will look like, and how to analyze and use data. Additionally, we'll start to discuss important ethical and legal considerations when working in data science, where to find data, and how to work with these data in RStudio.\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-getting-data}{Course 8}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{Data Analysis}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
This course will discuss the various types of data analysis, what to consider when carrying out an analysis, and how to approach a data analysis project.\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-analysis}{Course 9}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{Written and Oral Communication in Data Science}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
This course will discuss better practices for oral and written communication in data science.\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-communication}{Course 10}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.26\columnwidth}\raggedright
\textbf{Getting a Job in Data Science}\strut
\end{minipage} & \begin{minipage}[t]{0.54\columnwidth}\raggedright
After you learn all of these skills, it is still crucial that you learn the best ways to network and get a job in data science. This course will focus on so-called soft skills on how to give presentations, how to present yourself in the online community, how to network, and how to do data science interviews.\strut
\end{minipage} & \begin{minipage}[t]{0.12\columnwidth}\raggedright
\href{https://leanpub.com/universities/courses/jhu/cbds-getting-jobs}{Course 11}\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

\textbf{Note:} If the courses are used as part of a K-12 curriculum, the instructors can skip the last two courses that discuss getting jobs in data science and soft skills needed for jobs in data science.

\hypertarget{intro}{%
\chapter*{Course 0: Introduction to Chromebook Data Science}\label{intro}}
\addcontentsline{toc}{chapter}{Course 0: Introduction to Chromebook Data Science}

The instructor can use the following activities for this course:

\begin{itemize}
\item
  First and foremost, this session is a great time to talk about data science and what data scientists do. You can assign articles or Youtube videos to help students have some understanding of data science. To start this \href{https://www.youtube.com/watch?v=X3paOmcrTjQ}{video} does a good job explaining some of areas of data science. Note that in explaining data science, you can have a career-oriented approach or have a data-literacy approach. In the career-oriented approach you can focus on data science as an occupation and in the data-literacy approach you can focus on how data science can be used to help us understand the world. Tailor this part depending on the educational level of the students.
\item
  Talk about the program and what the expectations are. You can discuss the length of the program, the requirements, the assignments, etc. We run the program in 4 months including the time spent on courses (3 months) and the career mentoring phase. If you are a K-12 teacher, you can skip the career mentoring phase.
\item
  Talk about how students can customized their Chromebooks. Different programs may use different computers so this section can vary depending on the
\item
  Explain what the videos at the end of lessons on Leanpub are. These videos use automated voice using Amazon technology and we use these automated voices to make editing the videos faster and more efficient. Explain to your students that the videos are not complimentary or necessary to completing the lessons and are designed for students with disabilities or students who are more comfortable with voice lectures rather than texts. If your students are comfortable with reading the text, they can skip the videos.
\item
  If your students are using Chromebook throughout the program, here's a good time to tell them little fun things about their Chromebooks and why they are chosen for the program (cost and speed since they work on the cloud). These article explains some of the Chromebook tricks: \href{https://www.androidcentral.com/top-10-chromebook-tips-and-tricks}{Top 10 Chromebook tips and tricks} and \href{https://www.komando.com/tips/447946/7-useful-chromebook-tricks-you-arent-using-but-should}{8 useful Chromebook tricks you aren't using but should}.
\item
  We use \href{www.appear.in}{appear.in} to communicate with our students outside of classroom. appear.in is a user-friendly paltform for chatting with your students and is free for up to 4 participants. If you need to communicate with more than 3 students at the same time, you can pay for a premium service. This \href{https://appear.in/information/education/rachelle-poth/}{article} explains how appear.in can be used in classroom.
\end{itemize}

\hypertarget{chromebook}{%
\chapter*{Course 1: How to Use a Chromebook}\label{chromebook}}
\addcontentsline{toc}{chapter}{Course 1: How to Use a Chromebook}

Instructors can skip this course if students are not using Google Chromebooks. If your studnets use Chromebooks, use the following activities for making your student more comfortable with their computers.

\begin{itemize}
\item
  A lot of times, we notice that students do not know about keyboard shortcuts that can be extremely helpful. This session is a good opportunity to teach them how to use. A lot of these keyboard shortcuts are platform independent, i.e., one can use them across Chromebooks, PCs, or Macs. Follow this \href{https://www.thegeekstuff.com/2016/04/chromebook-keyboard-shortcuts/}{link} for a list of usefule keyboard shortcuts. It's a long list so if you just want to tell them about the most important ones, focus on \texttt{Ctrl\ +\ a}, \texttt{Ctrl\ +\ c}, \texttt{Ctrl\ +\ p}, \texttt{Ctrl\ +\ z}, and \texttt{Ctrl\ +\ f}.
\item
  There are also some tricks that students can learn about their Chromebooks. This is our favorite from \href{https://twitter.com/edtechteam}{EdTechTeam}.
\end{itemize}

\begin{figure}
\centering
\includegraphics{./files/00_chromebook_cheatsheet.jpeg}
\caption{Chromebook cheatsheet}
\end{figure}

\begin{itemize}
\item
  Depending on how you would like to communicate with your students outside of the classroom, here is a good place to introduce them the tool and make them comfortable with it. We use \href{https://slack.com/}{Slack} for creating a community outside of classroom so students can ask their questions and get answers from you or their classmates. There are two main advantages for using Slack: 1) all conversations are kept in one place rather than all over your email so it's easy to review conversation history. 2) Slack provides \emph{public} and \emph{private} channels so you can post things that everyone can see or post things that only specific students can see. It's also easy to share links, code, and use emojis on Slack so it's our absolute favorite. It's mainly free (unless you need to use specific features) and there is also discounts for education purposes. Follow this \href{https://get.slack.help/hc/en-us/articles/206646877-Slack-for-Education}{link} to learn about Slack for Education. If you want to use Slack, create an account and a channel for your classroom/school and during the classroom ask students to ask a question on the general channel.
\item
  One of the things that will be handy, is for students to know how to capture a screenshot on their Chromebook. In this exercise, ask students to capture a screenshop on their computers and share that screetshot with you on Slack. This feature will be super helpful for when they need to ask your questions remotely and you need to see their code.
\item
  Another tool that we use is an Chrome extension called \href{https://www.useloom.com/}{Loom}. In Loom, you or your students can record/capture their screen which can be extremely helpful in explaining things step by step. So it's a tool that you may use often (and not students) but even students can aks you questions on Loom but can show you step by step how thye do it. We use Loom to guide students through specific instruction (how to debug their code or how to perform other tasks). Loom is also free for the most part. Watch the following video to learn about how to use Loom in your classroom.
\end{itemize}

\begin{verbatim}
## PhantomJS not found. You can install it with webshot::install_phantomjs(). If it is installed, please make sure the phantomjs executable can be found via the PATH variable.
\end{verbatim}

\begin{itemize}
\item
  Teach your students about some of the most important apps they should use on their Chromebooks. We have mentioned some of these apps in this course but you can add your favorites to the list. You can also give an assignment that by next class, each students should find one app they think it's useful/cool that others should use as well. There are a lot of resources and lists on the most useful apps on Chromebook.
\item
  Ask your students in the class to practice installing and uninstalling an app from the Google Play store. To use Google Play store, your students may need to create an account so you can help them with that as well.
\item
  While we mentoion this in this course, ask your student to practice finding how much storage they have on their Chromebooks.
\item
  Students should be comfortable using the Chrome browser by now. If you think they're not, this is a good opportunity to give them more practice. One of the exercises you can assign, is to practice bookmark favorite websites. Ask your students to go to a website they regularly check and bookmark that webpage. Then ask them to close the tab and go to the same webpage using the bookmark menu on the Chrome browser.
\item
  One of the features of the Chrome browser is that it can save passwords so the user does not have to enter them every time they visit a website. Make sure you remind students of this feature and help them make an informed decision about whether they should or should not use this feature. This New York Times \href{https://www.nytimes.com/2017/01/06/technology/personaltech/managing-your-passwords-with-a-web-browser.html}{article} discuss that. This \href{https://support.google.com/chrome/answer/95606?co=GENIE.Platform\%3DDesktop\&hl=en}{article} by Google also explains how to manage saved passwords on Google Chrome. Tell them they can sync their devices so the passwords are saved across all devices. They will have to turn sunc on in Chrome. \href{https://support.google.com/chrome/answer/185277}{This} is how.
\end{itemize}

\hypertarget{google}{%
\chapter*{Course 2: Google and the Cloud}\label{google}}
\addcontentsline{toc}{chapter}{Course 2: Google and the Cloud}

\hypertarget{exercise-1-sharing-google-docs-with-others}{%
\section*{Exercise 1: Sharing Google Docs with Others}\label{exercise-1-sharing-google-docs-with-others}}
\addcontentsline{toc}{section}{Exercise 1: Sharing Google Docs with Others}

Level: Easy

Editing a text file offline

Each learner creates a google doc and invites another learner to the document to work collaboratively (practice different levels of access such as view/comment/edit)

Create a Google calendar event (called ``TEST EVENT'') and add others to it

Subscribing to a calendar (subscription to CBDS+ calendar)

How much space do you have left on your google drive?

Delete a file on Google Drive? Let's see how we can find it

Use a resume template on Google Docs

Create a google sheets document (we're gonna use it later), add 3 columns (artists, song, rating). List your top 10-30 favorite songs and decide how you rate the song on a scale of 1-5

Assignment: For the next session, make some slides about who you are/what you do/what are your hobbies/etc. You can present it to us next session.

\hypertarget{organizing}{%
\chapter*{Course 3: Organizing Data Science Projects}\label{organizing}}
\addcontentsline{toc}{chapter}{Course 3: Organizing Data Science Projects}

\hypertarget{exercise-1-replicating-a-google-doc-as-rmd}{%
\section*{Exercise 1: Replicating a Google doc as Rmd}\label{exercise-1-replicating-a-google-doc-as-rmd}}
\addcontentsline{toc}{section}{Exercise 1: Replicating a Google doc as Rmd}

Level: Easy

As your students to go to the link \url{https://docs.google.com/document/d/1vFQzQ6sRsMJyrqLY49qhEkxvQ0G1Zp_lMZjltpeLvUw/edit?usp=sharing}. Then ask them to go to Rstudio.cloud and create a new project. In the new project they should create a new .Rmd file. Instead of the text in the file, they should write text/code that will replicate the Google doc file in the link above. Once the knit the file as html/Word/pdf it should look similar to the Google doc.

\hypertarget{exercise-1-creating-a-new-project-and-the-workflow}{%
\section*{Exercise 1: Creating a New Project and the Workflow}\label{exercise-1-creating-a-new-project-and-the-workflow}}
\addcontentsline{toc}{section}{Exercise 1: Creating a New Project and the Workflow}

Level: Easy

This exercise is based on an exercise from the last course.

Ask your students to download the Gogole Sheets that they created on musicians. Then tell them to create a new project on RStudio.cloud and call it \textbf{my\_music\_project}. Then they should create all the folders necessary for a data science project as they've leanred in the lesson. Ask them to upload the csv file they downloaded from Google Sheets in the folder \textbf{tidy\_data}.

The next step is to create an Rmd file called \textbf{Readme} in the main folder with the headline \textbf{Scope of the Project} as the headline and a list that says objective 1, objective 2, objective 3. Make sure they save the document.

Additionally you can ask them to find the album cover of one of the songs on their list (tell them to find the link to the cover on the web) and add the image in their Rmd file.

They should use the style:

\begin{Shaded}
\begin{Highlighting}[]
\OperatorTok{!}\NormalTok{[Name of the image](link to the image)}
\end{Highlighting}
\end{Shaded}

Inside the parenthesis they shoudl insert the link to the image on the web. Ask them to \emph{knit} the document and see if the image appears in the html output.

\hypertarget{version-control}{%
\chapter*{Course 4: Version Control}\label{version-control}}
\addcontentsline{toc}{chapter}{Course 4: Version Control}

Create an empty repo and name it anything you want.
Go through the repo settings
Delete the repository (warning about what deleting means)
Create a new repo called ``my\_music\_analysis'' (make sure you DON'T initiate with readme)
Go to your RStudio.cloud project called my\_music\_project and push your project to the repository you made above. Follow these instructions \url{https://help.github.com/articles/adding-an-existing-project-to-github-using-the-command-line/}
Check your repository on github to see if your project is there.
Make some changes to your repository on github and commit your changes
Go to your project on rstudio.cloud and pull your changes
Go to somebody else's repository and add an issue there and ask a question about their repo

Look at the website \url{http://jhudatascience.org/chromebookdatascience/}
The website is hosted here \url{https://github.com/jhudsl/chromebookdatascience}
Fork the repo and then clone it to a new project on rstudio.cloud
Edit the file faq.Rmd. Add just a random line, knit the document and then push it to github.
Go to the repo on jhudsl again and make a pull request.
If you had to summarize what github does in one sentence, how would you describe it?

\hypertarget{intro-r}{%
\chapter*{Course 5: Introduction to R}\label{intro-r}}
\addcontentsline{toc}{chapter}{Course 5: Introduction to R}

One of the most important exercises for this course is to make students comfortable with RStudio and RStudio cloud. These are some of the exercises you can ask students to do during the class.

\begin{itemize}
\tightlist
\item
  Uploading files on RStudio.cloud
\item
  Exporting (downloading) files on RStudio.cloud
\item
  Renaming files in the Files section
\item
  Deleting files in the Files section
\item
  Creating new folders in the Files section
\item
  Looking at the packages installed
\item
  Looking at the environment through the Environment tab
\item
  Looking at history through the History tab
\item
  Browsing over the Console and the Terminal
\item
  Creating a new R script file
\item
  Creating a new R Markdown file
\item
  Opening a new R script file
\end{itemize}

\hypertarget{exercise-1-installing-and-uninstalling-packages}{%
\section*{Exercise 1: Installing and Uninstalling Packages}\label{exercise-1-installing-and-uninstalling-packages}}
\addcontentsline{toc}{section}{Exercise 1: Installing and Uninstalling Packages}

Level: Easy

Start with telling students what CRAN is. CRAN hosts additional packages that sit on top of the core (base) R software. While there are thousands of packages on CRAN, a lot of the packages are hosted on other hosting sites such as Github. In this exercise, we will ask students to install packages from both CRAN and Github.

First, ask students to install the \textbf{devtools} package. Ask them to use the package name without the quotations as below:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{install.packages}\NormalTok{(devtools)}
\CommentTok{# Error in install.packages : object 'devtools' not found}
\end{Highlighting}
\end{Shaded}

They will get an error saying the ``object `devtools' not found''. Remind them when we install packages, we have to put the package name in quotations. So the correct way is:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{install.packages}\NormalTok{(}\StringTok{"devtools"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

The package \textbf{Devtools} is hosted on CRAN, therefore, we don't have to specify where the package is hosted. We just have to pass the name of the package to the function \texttt{install.packages()} to install it. Now ask them to load the package. Remind them that to load packages we use the following function:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{suppressWarnings}\NormalTok{(}\KeywordTok{library}\NormalTok{(devtools))}
\end{Highlighting}
\end{Shaded}

Note that when we load packages we don't necessarily have to use quotation marks. It is recommended, however, that to use quotations for both \texttt{install.packages()} and \texttt{library()} functions. The package \textbf{devtools} makes package development easier. One of the applications of the package is that it allows us to install packages that are not on CRAN. Now ask students to install the package \textbf{knockknockjokes} from github using. The link to the Github repo of the package is \url{www.github.com/psolymos/KnockKnockJokes}. Ask them how they are supposed to install a package from Github.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{suppressWarnings}\NormalTok{(devtools}\OperatorTok{::}\KeywordTok{install_github}\NormalTok{(}\StringTok{"psolymos/KnockKnockJokes"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Downloading GitHub repo psolymos/KnockKnockJokes@master
## from URL https://api.github.com/repos/psolymos/KnockKnockJokes/zipball/master
\end{verbatim}

\begin{verbatim}
## Installing KnockKnockJokes
\end{verbatim}

\begin{verbatim}
## '/Library/Frameworks/R.framework/Resources/bin/R' --no-site-file  \
##   --no-environ --no-save --no-restore --quiet CMD INSTALL  \
##   '/private/var/folders/6c/94269x114tlc1x1c901c6_8m0000gn/T/RtmpxMEXlg/devtools10d317a7661af/psolymos-KnockKnockJokes-5096f51'  \
##   --library='/Library/Frameworks/R.framework/Versions/3.4/Resources/library'  \
##   --install-tests
\end{verbatim}

\begin{verbatim}
## 
\end{verbatim}

\begin{verbatim}
## Reloading installed KnockKnockJokes
\end{verbatim}

Note that we have to specify where the package is hosted when we use the command \texttt{install\_github()} from the package \textbf{devtools}. psolymos is the username of the user who developed the package and KnockKnockJokes is the name of the repository. Now ask students to load the package.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{suppressWarnings}\NormalTok{(}\KeywordTok{library}\NormalTok{(KnockKnockJokes))}
\end{Highlighting}
\end{Shaded}

This package is very simple. It basically tells you knock knock jokes. You can ask students to browse through the package documentation on \href{https://github.com/psolymos/KnockKnockJokes}{its Github repo} and see what function they should use for a joke. Here's one for a random joke:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{KnockKnock}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Knock-knock!
##  Who's there?
## Celeste.
##  Celeste who?
## Celeste time I'm telling you, open up.
\end{verbatim}

As an assignment (in class or at home), you can ask students to find an R package they find interesting and tell the class about it.

\hypertarget{exercise-2-using-the-script-editor}{%
\section*{Exercise 2: Using the script editor}\label{exercise-2-using-the-script-editor}}
\addcontentsline{toc}{section}{Exercise 2: Using the script editor}

Level: Easy

Ask students to go to the my\_music\_project on RStudio.cloud that they previously created. Ask them to create a new R script file in the folder code/tidy\_code and save it as exploratory\_analysis. Ask them to install and load the package \textbf{dplyr} in the beginning of the file. One of the nice things about RStudio is its keyboard shortcuts. One that is used a lot is Ctrl+Enter.

Tell your students to type in \texttt{2\ +\ 2} in the script file and while the cursor is on that line, hold the Ctrl (Command) key and then press Enter (or Return). What happens? Ctrl+Enter is used for running code without clicking on the Run tab. It makes running codes line by line a lot easier. As long as the cursor is somewhere on the line, Ctrl+Enter will run that line.

You can also remind them that they can select and highlight multiple line and use Ctrl+Enter. For instance, ask them to type these two lines in an R script file and highlight both line together and then use Ctrl+Enter.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x <-}\StringTok{ }\DecValTok{2}
\NormalTok{x }\OperatorTok{+}\StringTok{ }\DecValTok{3}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 5
\end{verbatim}

\hypertarget{exercise-xx-basic-commands-in-r}{%
\section*{Exercise XX: Basic Commands in R}\label{exercise-xx-basic-commands-in-r}}
\addcontentsline{toc}{section}{Exercise XX: Basic Commands in R}

Level: Easy

In this exercise, we will perform some basic commands in R on simple vectors. First, ask your students to create an vector object called \texttt{ages} that contains the following numbers:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ages <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DecValTok{22}\NormalTok{, }\DecValTok{18}\NormalTok{, }\DecValTok{20}\NormalTok{, }\DecValTok{25}\NormalTok{, }\DecValTok{22}\NormalTok{, }\DecValTok{19}\NormalTok{, }\DecValTok{32}\NormalTok{, }\DecValTok{17}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

After giving them the above numbers and saving the object, ask your students to use an R function to find whether there is anybody who is older than 30 years old. Tell them you simply just need a TRUE/FALSE answer to this quesion. They can use the following command:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{any}\NormalTok{(ages }\OperatorTok{>}\StringTok{ }\DecValTok{30}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] TRUE
\end{verbatim}

Now, ask them to use an R function to find whether all ages are above 15. Again, remind them that the answer should be a simple TRUE/FALSE. They should use something like:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{all}\NormalTok{(ages }\OperatorTok{>}\StringTok{ }\DecValTok{15}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] TRUE
\end{verbatim}

You can further ask them to find which ages are larger than 20 For this, they can use the function \texttt{which()} to obtain the index of the element that is larger than 20 like below.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{a <-}\StringTok{ }\KeywordTok{which}\NormalTok{(ages }\OperatorTok{>}\StringTok{ }\DecValTok{20}\NormalTok{)}
\NormalTok{a}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 1 4 5 7
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ages[a]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 22 25 22 32
\end{verbatim}

\hypertarget{exercise-xx-creating-a-data-frame}{%
\section*{Exercise XX: Creating a Data Frame}\label{exercise-xx-creating-a-data-frame}}
\addcontentsline{toc}{section}{Exercise XX: Creating a Data Frame}

Level: Medium

In this exercise, students will learn how to create a data frame. But since they've already learned how to create a repository on Github and push things to Github, ask them to create a repositiory there called movie\_project. Further, ask them to clone the repository to an RStudio.cloud project with the same title. In the RStudio project, they should create all the necessary folders as they've learned before.

We are going to create a data frame that has four columns: \texttt{title}, \texttt{year}, \texttt{rating}, and \texttt{genre} for the top 10 movies on imdb. Ask your students to go to the link \href{https://www.imdb.com/search/title?genres=drama\&groups=top_250\&sort=user_rating}{here}. Ask them to create an R script file in the folder called code and type their code there. Based on the information on the link, ask them to input the title, year, rating, and genre information for the top 10 movies in a data frame. Ask them to call the data frame \texttt{movies\_df} They should do something like:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{title <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"The Shawshank Redemption"}\NormalTok{, }\StringTok{"The Godfather"}\NormalTok{, }\StringTok{"The Dark Knight"}\NormalTok{, }\StringTok{"The Godfather: Part II"}\NormalTok{,}
                \StringTok{"The Lord of the Rings: The Return of the King"}\NormalTok{, }\StringTok{"Pulp Fiction"}\NormalTok{, }\StringTok{"Schindler's List"}\NormalTok{,}
                \StringTok{"12 Angry Men"}\NormalTok{, }\StringTok{"Fight Club"}\NormalTok{, }\StringTok{"The Lord of the Rings: The Fellowship of the Ring"}\NormalTok{)}
\NormalTok{year <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DecValTok{1994}\NormalTok{, }\DecValTok{1972}\NormalTok{, }\DecValTok{2008}\NormalTok{, }\DecValTok{1974}\NormalTok{, }\DecValTok{2003}\NormalTok{, }\DecValTok{1994}\NormalTok{, }\DecValTok{1993}\NormalTok{, }\DecValTok{1957}\NormalTok{, }\DecValTok{1999}\NormalTok{, }\DecValTok{2001}\NormalTok{)}
\NormalTok{rating <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\FloatTok{9.3}\NormalTok{, }\FloatTok{9.2}\NormalTok{, }\FloatTok{9.0}\NormalTok{, }\FloatTok{9.0}\NormalTok{, }\FloatTok{8.9}\NormalTok{, }\FloatTok{8.9}\NormalTok{, }\FloatTok{8.9}\NormalTok{, }\FloatTok{8.9}\NormalTok{, }\FloatTok{8.8}\NormalTok{, }\FloatTok{8.8}\NormalTok{)}
\NormalTok{genre <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"Drama"}\NormalTok{, }\StringTok{"Crime"}\NormalTok{, }\StringTok{"Action"}\NormalTok{, }\StringTok{"Crime"}\NormalTok{, }\StringTok{"Adventure"}\NormalTok{, }\StringTok{"Crime"}\NormalTok{, }\StringTok{"Biography"}\NormalTok{, }\StringTok{"Drama"}\NormalTok{, }\StringTok{"Drama"}\NormalTok{, }\StringTok{"Adventure"}\NormalTok{)}
\NormalTok{movies_df <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(title, year, rating, genre)}
\end{Highlighting}
\end{Shaded}

Now that they've created the data frame, ask them to show the first 4 rows of the data:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{head}\NormalTok{(movies_df, }\DecValTok{4}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                      title year rating  genre
## 1 The Shawshank Redemption 1994    9.3  Drama
## 2            The Godfather 1972    9.2  Crime
## 3          The Dark Knight 2008    9.0 Action
## 4   The Godfather: Part II 1974    9.0  Crime
\end{verbatim}

Ask them to call the column that contains information about movie titles.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{movies_df}\OperatorTok{$}\NormalTok{title}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] The Shawshank Redemption                         
##  [2] The Godfather                                    
##  [3] The Dark Knight                                  
##  [4] The Godfather: Part II                           
##  [5] The Lord of the Rings: The Return of the King    
##  [6] Pulp Fiction                                     
##  [7] Schindler's List                                 
##  [8] 12 Angry Men                                     
##  [9] Fight Club                                       
## [10] The Lord of the Rings: The Fellowship of the Ring
## 10 Levels: 12 Angry Men Fight Club Pulp Fiction ... The Shawshank Redemption
\end{verbatim}

Ask them to find the ``class'' of the columns year and genre:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{(movies_df}\OperatorTok{$}\NormalTok{year)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "numeric"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{class}\NormalTok{(movies_df}\OperatorTok{$}\NormalTok{genre)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "factor"
\end{verbatim}

Ask your student to find the difference between the maximum and the minimum rating in the data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{dif <-}\StringTok{ }\KeywordTok{max}\NormalTok{(movies_df}\OperatorTok{$}\NormalTok{rating) }\OperatorTok{-}\StringTok{ }\KeywordTok{min}\NormalTok{(movies_df}\OperatorTok{$}\NormalTok{rating)}
\NormalTok{dif}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.5
\end{verbatim}

Then ask them to find the dimension of the data frame:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{dim}\NormalTok{(movies_df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 10  4
\end{verbatim}

Now ask them to change the column called \texttt{title} to \texttt{name}:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{colnames}\NormalTok{(movies_df)[}\DecValTok{1}\NormalTok{] <-}\StringTok{ "name"}
\end{Highlighting}
\end{Shaded}

Without checking manually, ask them to see if the movie ``Groundhog Day'' is among the top 10 movies:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{any}\NormalTok{(movies_df}\OperatorTok{$}\NormalTok{name }\OperatorTok{==}\StringTok{ "Groundhog Day"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] FALSE
\end{verbatim}

Ask them to find the number of the movies are in the genre Drama:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{drama <-}\StringTok{ }\KeywordTok{which}\NormalTok{(movies_df}\OperatorTok{$}\NormalTok{genre }\OperatorTok{==}\StringTok{ "Drama"}\NormalTok{)}
\KeywordTok{length}\NormalTok{(drama)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d <-}\StringTok{ }\KeywordTok{list}\NormalTok{(}\DataTypeTok{movies =} \KeywordTok{c}\NormalTok{(}\StringTok{"m1"}\NormalTok{, }\StringTok{"m2"}\NormalTok{),}
     \DataTypeTok{states =} \DecValTok{4}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{exercise-xx-creating-lists-in-r}{%
\section*{Exercise XX: Creating Lists in R}\label{exercise-xx-creating-lists-in-r}}
\addcontentsline{toc}{section}{Exercise XX: Creating Lists in R}

Level: Easy

The beauty of lists are that you can have elements with different sizes and structures in them. For this exercise, ask your students to create a list with three elements. The first element called \texttt{places} should be a vector of the states (provinces) or countries your students have been to. The next element called \texttt{ice\_cream} should conain the name of their top two ice cream flavors. The last element called \texttt{sports} should contain their favorite sports. The list should be called \texttt{about\_me}. The code should look like:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{about_me <-}\StringTok{ }\KeywordTok{list}\NormalTok{(}\DataTypeTok{places =} \KeywordTok{c}\NormalTok{(}\StringTok{"New Mexico"}\NormalTok{, }\StringTok{"Vermont"}\NormalTok{, }\StringTok{"Washington"}\NormalTok{, }\StringTok{"California"}\NormalTok{),}
                 \DataTypeTok{ice_creams =} \KeywordTok{c}\NormalTok{(}\StringTok{"Vanilla"}\NormalTok{, }\StringTok{"Chocolate"}\NormalTok{),}
                 \DataTypeTok{sports =} \KeywordTok{c}\NormalTok{(}\StringTok{"Soccer"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

Ask them to call the first element of the list:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{about_me[[}\DecValTok{1}\NormalTok{]]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "New Mexico" "Vermont"    "Washington" "California"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{## note that they can also call it by }
\NormalTok{about_me[[}\StringTok{"places"}\NormalTok{]]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "New Mexico" "Vermont"    "Washington" "California"
\end{verbatim}

Now, ask then to add another sport that they like to the element \texttt{sports}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{about_me[[}\StringTok{"sports"}\NormalTok{]][[}\DecValTok{2}\NormalTok{]] <-}\StringTok{ "Volleyball"}
\end{Highlighting}
\end{Shaded}

\hypertarget{exercise-xx-missing-values-in-r}{%
\section*{Exercise XX: Missing Values in R}\label{exercise-xx-missing-values-in-r}}
\addcontentsline{toc}{section}{Exercise XX: Missing Values in R}

Level: Moderate

Ask your students to load the \texttt{airquality} dataset in R. Ask them to show the columns that exist in the data and find the dimension of the data.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{colnames}\NormalTok{(airquality)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "Ozone"   "Solar.R" "Wind"    "Temp"    "Month"   "Day"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{dim}\NormalTok{(airquality)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 153   6
\end{verbatim}

Ask them to look at the first 10 rows of the data:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{head}\NormalTok{(airquality, }\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    Ozone Solar.R Wind Temp Month Day
## 1     41     190  7.4   67     5   1
## 2     36     118  8.0   72     5   2
## 3     12     149 12.6   74     5   3
## 4     18     313 11.5   62     5   4
## 5     NA      NA 14.3   56     5   5
## 6     28      NA 14.9   66     5   6
## 7     23     299  8.6   65     5   7
## 8     19      99 13.8   59     5   8
## 9      8      19 20.1   61     5   9
## 10    NA     194  8.6   69     5  10
\end{verbatim}

Do they see any missing values in the first 10 rows? They should answer yes as the the first 10 rows clearly has some missing values. Now, ask them to use the appropriate function that checks whether the column \texttt{Temp} has missing values. How about the column \texttt{Ozone}?

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{any}\NormalTok{(}\KeywordTok{is.na}\NormalTok{(airquality}\OperatorTok{$}\NormalTok{Temp))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] FALSE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{any}\NormalTok{(}\KeywordTok{is.na}\NormalTok{(airquality}\OperatorTok{$}\NormalTok{Ozone))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] TRUE
\end{verbatim}

The column Ozone, contains mean ozone in parts per billion from 1300 to 1500 hours at Roosevelt Island. What rows in the column \texttt{Ozone} have missing values

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{which}\NormalTok{(}\KeywordTok{is.na}\NormalTok{(airquality}\OperatorTok{$}\NormalTok{Ozone))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1]   5  10  25  26  27  32  33  34  35  36  37  39  42  43  45  46  52
## [18]  53  54  55  56  57  58  59  60  61  65  72  75  83  84 102 103 107
## [35] 115 119 150
\end{verbatim}

Now, ask your students to use the appropriate function to calculate the average of the column \texttt{Ozone}.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{mean}\NormalTok{(airquality}\OperatorTok{$}\NormalTok{Ozone)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] NA
\end{verbatim}

If they use the code above, the answer will be \texttt{NA}. Tell them that this is due to the missing values in the column and because of that, the function \texttt{mean()} does not calculate the average. For this, to see the average, they will have to use the argument \texttt{na.rm} and set it to \texttt{TRUE}. By doing this, they will tell R to ignore the missing values and only perform the function on the non-missing values.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{mean}\NormalTok{(airquality}\OperatorTok{$}\NormalTok{Ozone, }\DataTypeTok{na.rm =} \OtherTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 42.12931
\end{verbatim}

Now, ask them to remove all the rows containing missing values from the entire data and save the new object as \texttt{airquality\_nomissing}. Note that they should use the function \texttt{na.omit()}. What is the dimension of the new data?

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{airquality_nomissing <-}\StringTok{ }\KeywordTok{na.omit}\NormalTok{(airquality)}
\KeywordTok{dim}\NormalTok{(airquality_nomissing)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 111   6
\end{verbatim}

Finally, ask them to write code that will replace all values of the column \texttt{Wind} that are equal to \texttt{8.0} with \texttt{NA}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{airquality}\OperatorTok{$}\NormalTok{Wind[airquality}\OperatorTok{$}\NormalTok{Wind }\OperatorTok{==}\StringTok{ }\FloatTok{8.0}\NormalTok{] <-}\StringTok{ }\OtherTok{NA}
\end{Highlighting}
\end{Shaded}

\hypertarget{exercise-4-reverse-a-string-function}{%
\section*{Exercise 4: Reverse a String Function}\label{exercise-4-reverse-a-string-function}}
\addcontentsline{toc}{section}{Exercise 4: Reverse a String Function}

Level: Difficult

Ask your students to write a function that takes a string and returns the reverse version of the string. So the function returns the string ``book'' as ``koob''. This function is a simple version of a decoding function. Let's decompose this problem. There are probably various ways to do this problem. One way to go about solving this problem is to decompose the words into characters. Then reverse the order of the characters and then paste them back together. The first step can be done using the \texttt{str\_split()} function from the \textbf{stringr} package.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(stringr)}
\NormalTok{word <-}\StringTok{ "book"}
\NormalTok{word_decom <-}\StringTok{ }\KeywordTok{str_split}\NormalTok{(}\StringTok{"book"}\NormalTok{, }\StringTok{""}\NormalTok{)}
\NormalTok{word_decom}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [[1]]
## [1] "b" "o" "o" "k"
\end{verbatim}

The \texttt{word\_decom} object is a list and its first element is a vector of all the character that make up the word \emph{book}. If we have a vector, we can use the function \texttt{rev()} to reverse the order of its elements. So \texttt{rev(c(1,2,3))} will return \texttt{3\ 2\ 1}. So to reverse the order of characters in the object \texttt{word\_decom} we write

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{word_decom_rev <-}\StringTok{ }\KeywordTok{rev}\NormalTok{(word_decom[[}\DecValTok{1}\NormalTok{]])}
\NormalTok{word_decom_rev}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "k" "o" "o" "b"
\end{verbatim}

\texttt{{[}{[}1{]}{]}} is for calling the vector in the list. Now, we have the decomposed word reversed. But the result is a vector of characters and not a string. To create a string from all the characters, we can use the function \texttt{paste()} as we have used before.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{word_rev <-}\StringTok{ }\KeywordTok{paste}\NormalTok{(word_decom_rev, }\DataTypeTok{collapse =} \StringTok{""}\NormalTok{)}
\NormalTok{word_rev}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "koob"
\end{verbatim}

Your students now can combine all the steps and create the function. This would be the simplest form of the functino.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{word_reverse <-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(x)\{}
\NormalTok{    word_decom <-}\StringTok{ }\KeywordTok{str_split}\NormalTok{(x, }\StringTok{""}\NormalTok{)}
\NormalTok{    word_decom_rev <-}\StringTok{ }\KeywordTok{rev}\NormalTok{(word_decom[[}\DecValTok{1}\NormalTok{]])}
\NormalTok{    word_rev <-}\StringTok{ }\KeywordTok{paste}\NormalTok{(word_decom_rev, }\DataTypeTok{collapse =} \StringTok{""}\NormalTok{)}
    \KeywordTok{return}\NormalTok{(word_rev)}
\NormalTok{\}}
\KeywordTok{word_reverse}\NormalTok{(}\StringTok{"chromebook"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "koobemorhc"
\end{verbatim}

\hypertarget{exercise-5-other-short-exercises}{%
\section*{Exercise 5: Other Short Exercises}\label{exercise-5-other-short-exercises}}
\addcontentsline{toc}{section}{Exercise 5: Other Short Exercises}

Level: Easy to moderate

Write a function that takes user's name and returns ``Hello, Name!'' Note that they can use the function \texttt{paste()} for pasting two or more character strings. The argument \texttt{sep} determines how the strings are going to be attached, e.g.~if \texttt{sep\ =\ "\_"} then the strings will be separated by an underline.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hello <-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(name)\{}
    \KeywordTok{print}\NormalTok{(}\KeywordTok{paste}\NormalTok{(}\StringTok{"Hello "}\NormalTok{, name, }\StringTok{"!"}\NormalTok{, }\DataTypeTok{sep =} \StringTok{""}\NormalTok{))}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

Write a function that takes number 1 and number 2 and checks whether number 1 is divisible by number 2. If divisible, returns a message saying the first number is divisible by the second number and if not returns a message saying the first number is not divisible by the second number.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{check_division <-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(num1, num2)\{}
    \ControlFlowTok{if}\NormalTok{ (num1 }\OperatorTok{%%}\StringTok{ }\NormalTok{num2 }\OperatorTok{==}\StringTok{ }\DecValTok{0}\NormalTok{) \{}
        \KeywordTok{print}\NormalTok{(}\KeywordTok{paste}\NormalTok{(num1, }\StringTok{" is divisible by "}\NormalTok{, num2, }\StringTok{"."}\NormalTok{, }\DataTypeTok{sep=}\StringTok{""}\NormalTok{))}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
        \KeywordTok{print}\NormalTok{(}\KeywordTok{paste}\NormalTok{(num1, }\StringTok{" is NOT divisible by "}\NormalTok{, num2, }\StringTok{"."}\NormalTok{, }\DataTypeTok{sep =} \StringTok{""}\NormalTok{))}
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

In the function above, check to make sure number 1 is bigger than number 2. If not, halt and show a message that the first number should be larger than the second number.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{check_division <-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(num1, num2)\{}
    \ControlFlowTok{if}\NormalTok{(num1 }\OperatorTok{<}\StringTok{ }\NormalTok{num2) }\KeywordTok{stop}\NormalTok{(}\StringTok{"The first number should be larger than the second number."}\NormalTok{)}
    \ControlFlowTok{else}\NormalTok{ \{}
       \ControlFlowTok{if}\NormalTok{ (num1 }\OperatorTok{%%}\StringTok{ }\NormalTok{num2 }\OperatorTok{==}\StringTok{ }\DecValTok{0}\NormalTok{) \{}
        \KeywordTok{print}\NormalTok{(}\KeywordTok{paste}\NormalTok{(num1, }\StringTok{" is divisible by "}\NormalTok{, num2, }\StringTok{"."}\NormalTok{, }\DataTypeTok{sep=}\StringTok{""}\NormalTok{))}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
        \KeywordTok{print}\NormalTok{(}\KeywordTok{paste}\NormalTok{(num1, }\StringTok{" is NOT divisible by "}\NormalTok{, num2, }\StringTok{"."}\NormalTok{, }\DataTypeTok{sep =} \StringTok{""}\NormalTok{))}
\NormalTok{    \} }
\NormalTok{    \}}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\hypertarget{tidying}{%
\chapter*{Course 6: Data Tidying}\label{tidying}}
\addcontentsline{toc}{chapter}{Course 6: Data Tidying}

Creating an object such as a data frame and saving it as a rda or rds file
save(mpg, cyl, file=``mtcars\_objects.rda'')
load(``mtcars\_objects.rda'')
saveRDS(mpg, file=``mpg.rds'')
mpg \textless{}- readRDS(``mpg.rds'')

Write an encoder function that takes a word from the user and encodes each character in the alphabet to the next character and returns it. e.g.~``peach'' will be encoded to ``qfbdi''

Let's create a data frame in R
And then save the data as rda and rds and then load the data and share the data on slack
Let's go to your imdb project on RStudio.Cloud. Create an Rmd file in your code folder.
Edit the YAML in the file.
Load the imdb dataframe. The rest of the session we'll work with different columns in the data.
Push all the changes to Github

str\_view(names, ``\^{}M'')
str\_view(names, ``M\$'')

str\_detect()
str\_count()
str\_subset()

\hypertarget{exercise-1-tidying-nba-finals-data}{%
\section*{Exercise 1: Tidying NBA Finals Data}\label{exercise-1-tidying-nba-finals-data}}
\addcontentsline{toc}{section}{Exercise 1: Tidying NBA Finals Data}

Level: Difficult

In this exercise we will work with \href{https://www.kaggle.com/daverosenman/nba-finals-team-stats}{NBA final teams stats} on Kaggle. There is two .csv files. The `champs.csv' file contains game-by-game team totals for the championship team from every finals game between 1980 and 2017. The `runnerups.csv' contains game-by-game team totals for the runner-up team from every finals game between 1980 and 2017. The 1980 NBA Finals was the first Finals series since the NBA added the three point line.

This exercise is inpired by two kernells on Kaggle that can be found \href{https://www.kaggle.com/carterallen/nba-championship-data}{here} and \href{https://www.kaggle.com/daverosenman/nba-finals-three-point-stats-1980-2017}{here}. Ask your stduent to download the data on Kaggle or on our Github repository for this guide.

In order to download data on Kaggle, students are required to create a Kaggle account. They can do so by linking their Google account.

The first step is to import the data into R. Since importing .csv files is in a future lesson, tell your students the commands the need to import the .csv files. We are going to use \texttt{read\_csv} command from the \textbf{readr} package. Ask them to save the two files in two separate objects. Here we called them \texttt{champs} and \texttt{runners}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{knitr}\OperatorTok{::}\NormalTok{opts_chunk}\OperatorTok{$}\KeywordTok{set}\NormalTok{(}\DataTypeTok{echo =} \OtherTok{TRUE}\NormalTok{)}
\KeywordTok{library}\NormalTok{(tidyverse)}
\CommentTok{# importing the data}
\NormalTok{champs <-}\StringTok{ }\KeywordTok{read_csv}\NormalTok{(}\DataTypeTok{file =} \StringTok{"./data/nba/championsdata.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Parsed with column specification:
## cols(
##   .default = col_double(),
##   Team = col_character()
## )
\end{verbatim}

\begin{verbatim}
## See spec(...) for full column specifications.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{runners <-}\StringTok{ }\KeywordTok{read_csv}\NormalTok{(}\DataTypeTok{file =} \StringTok{"./data/nba/runnerupsdata.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Parsed with column specification:
## cols(
##   .default = col_double(),
##   Team = col_character()
## )
## See spec(...) for full column specifications.
\end{verbatim}

You can ask your students to find out what column contains team names. They can go to the Kaggle \href{https://www.kaggle.com/daverosenman/nba-finals-team-stats}{link} to find out. The column is called \texttt{Team}.

Now ask them to find the \emph{distinct} team names. The function used to find the distinct values of a variable is \texttt{distinct()}. You can either tell them the function or ask them to google and find the function themselves. Here's how they can do it in a pipe.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{## check the names, see any issue}
\NormalTok{champs }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\KeywordTok{select}\NormalTok{(Team) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{distinct}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 13 x 1
##    Team     
##    <chr>    
##  1 Lakers   
##  2 Celtics  
##  3 Sixers   
##  4 Pistons  
##  5 Bulls    
##  6 Rockets  
##  7 Spurs    
##  8 Heat     
##  9 Mavericks
## 10 'Heat'   
## 11 Warriors 
## 12 Cavaliers
## 13 Warriorrs
\end{verbatim}

Once your students run the code above, they will notice some peculiar values. For instance \texttt{\textquotesingle{}Heat\textquotesingle{}} and \texttt{Warriorrs}. These kind of mistakes can happen in any data analysis. Ask your students to fix the issue using a \textbf{dplyr} function. Here's how we did it using hte \texttt{iflese()} function. The line \texttt{mutate(Team\ =\ ifelse(Team\ ==\ "Warriorrs","Warriors",Team))} creates a column called \texttt{Team} which is the same as the old column \texttt{Team} except whenever the value in the column is \texttt{Warriorrs} it is replaced by \texttt{Warriors}. Note that there are other ways to do this so you can ask your students to figure out a way on their own.

The other fix we need to do is to convert the two columns \texttt{Win} and \texttt{Home}. Ask your students to look at the class of the two columns. They will see that the values stored in the two columns are integer. Ask them to convert those two columns to factors and save the new columns back to the columns \texttt{Win} and \texttt{Home}. Here's how to do so for both datasets.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# fix the heat and warriors}
\NormalTok{champs <-}\StringTok{ }\NormalTok{champs }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Team =} \KeywordTok{ifelse}\NormalTok{(Team }\OperatorTok{==}\StringTok{ "Warriorrs"}\NormalTok{,}\StringTok{"Warriors"}\NormalTok{,Team)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Team =} \KeywordTok{ifelse}\NormalTok{(Team }\OperatorTok{==}\StringTok{ "'Heat'"}\NormalTok{,}\StringTok{"Heat"}\NormalTok{,Team)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Win =} \KeywordTok{as.factor}\NormalTok{(Win)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Home =} \KeywordTok{as.factor}\NormalTok{(Home))}

\NormalTok{runners <-}\StringTok{ }\NormalTok{runners }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Team =} \KeywordTok{ifelse}\NormalTok{(Team }\OperatorTok{==}\StringTok{ "Warriorrs"}\NormalTok{,}\StringTok{"Warriors"}\NormalTok{,Team)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Team =} \KeywordTok{ifelse}\NormalTok{(Team }\OperatorTok{==}\StringTok{ "'Heat'"}\NormalTok{,}\StringTok{"Heat"}\NormalTok{,Team)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Win =} \KeywordTok{as.factor}\NormalTok{(Win)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Home =} \KeywordTok{as.factor}\NormalTok{(Home))}
\end{Highlighting}
\end{Shaded}

Now, a good exercise would be too bind the two dataframes together. Ask your students to find the appropritate \textbf{dplyr} function for binding the rows together. Note that since the two dataframes have the same set of columns, this is easily done. They can use the function \texttt{bind\_rows()} function as is in the lessons or use the base R function \texttt{row.bind()}.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{## bind the two data sets together}
\NormalTok{allteams <-}\StringTok{ }\KeywordTok{bind_rows}\NormalTok{(champs,runners)}
\end{Highlighting}
\end{Shaded}

It is in general better when we bind two datasets to have an indicator variable that shows from which dataset each row comes from. This can be done using the \texttt{.id} argument in the \texttt{bind\_rows()} function. Note that by saying \texttt{"Champion"\ =\ champs} and \texttt{"Runner"\ =\ runners} we are making the identifier equal to \texttt{Champion} for the \emph{champs} dataframe and equal to \texttt{Runner} for the \emph{runners} dataframe.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{## add a column that shows champions vs. runnerups call it rank}
\NormalTok{allteams <-}\StringTok{ }\KeywordTok{bind_rows}\NormalTok{(}\StringTok{"Champion"}\NormalTok{ =}\StringTok{ }\NormalTok{champs, }\StringTok{"Runner"}\NormalTok{ =}\StringTok{ }\NormalTok{runners, }\DataTypeTok{.id =} \StringTok{"rank"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{exercise-2-calculating-age-based-on-birthdate}{%
\section*{Exercise 2: Calculating Age Based on Birthdate}\label{exercise-2-calculating-age-based-on-birthdate}}
\addcontentsline{toc}{section}{Exercise 2: Calculating Age Based on Birthdate}

In this exercise, your students will learn how to work with data objects. They have to combine their skills in writing functions and working with the package \textbf{lubridate}. Ask them to install and load the package \textbf{lubridate}.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{install.packages}\NormalTok{(}\StringTok{"lubridate"}\NormalTok{)}
\KeywordTok{library}\NormalTok{(}\StringTok{"lubridate"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

First, ask them to create an object called and call it \texttt{mybday} that stores their birthday.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(lubridate)}
\NormalTok{mybday <-}\StringTok{ }\KeywordTok{ymd}\NormalTok{(}\StringTok{"1998-09-20"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Note that they can also save their birthday like:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mybday <-}\StringTok{ }\KeywordTok{dmy}\NormalTok{(}\StringTok{"20-Sep-1998"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Now ask your students to find the function in R that returns today's date. You can ask them to google this as it's likely that the first link has the answer to their question. The function they need to use is \texttt{Sys.Date()}. Ask them to save today's date to an object called \texttt{today}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{today <-}\StringTok{ }\KeywordTok{Sys.Date}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

The interesting thing about date objects is that we can do algebraic operations on them just like we do to numeric objects. We can add them or subtract one from another. Now, ask your studnets how they would calculate their age based on the two objects. They probably say they'd subtract \texttt{mybdat} from \texttt{today} and that's true. When they do so, they will realize the answer is in days and not in years.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{today }\OperatorTok{-}\StringTok{ }\NormalTok{mybday}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Time difference of 7525 days
\end{verbatim}

Well, then can then easily convert the answer to years by dividing the number by 365 or they can use the function \texttt{time\_length()} again from the \textbf{lubridate} package.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{time_length}\NormalTok{(today }\OperatorTok{-}\StringTok{ }\NormalTok{mybday, }\DataTypeTok{unit =} \StringTok{"year"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 20.61644
\end{verbatim}

Now that your studetns are comfortable calculating age based on a birthdate and current date, ask them to write a function that will take a person's birthdate and will return the age in years. This should be easy given the solution above.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{age_calc <-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(bday)\{}
\NormalTok{    bday =}\StringTok{ }\KeywordTok{ymd}\NormalTok{(bday)}
\NormalTok{    today =}\StringTok{ }\KeywordTok{Sys.Date}\NormalTok{()}
\NormalTok{    dif =}\StringTok{ }\KeywordTok{time_length}\NormalTok{(today }\OperatorTok{-}\StringTok{ }\NormalTok{bday, }\DataTypeTok{unit =} \StringTok{"year"}\NormalTok{)}
    \KeywordTok{return}\NormalTok{(dif)}
\NormalTok{\}}
\KeywordTok{age_calc}\NormalTok{(}\StringTok{"1982-05-10"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 36.99178
\end{verbatim}

Tell your students to add a warning message that is shown to user warning them to enter date as ``yyyy-md-dd''. So the function should show a warning message after the calculation is done.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{age_calc <-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(bday)\{}
    \KeywordTok{warning}\NormalTok{(}\StringTok{"Please enter the date as 'yyyy-mm-dd'"}\NormalTok{)}
\NormalTok{    bday =}\StringTok{ }\KeywordTok{ymd}\NormalTok{(bday)}
\NormalTok{    today =}\StringTok{ }\KeywordTok{Sys.Date}\NormalTok{()}
\NormalTok{    dif =}\StringTok{ }\KeywordTok{time_length}\NormalTok{(today }\OperatorTok{-}\StringTok{ }\NormalTok{bday, }\DataTypeTok{unit =} \StringTok{"year"}\NormalTok{)}
    \KeywordTok{return}\NormalTok{(dif)}
\NormalTok{\}}
\KeywordTok{age_calc}\NormalTok{(}\StringTok{"1982-05-10"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning in age_calc("1982-05-10"): Please enter the date as 'yyyy-mm-dd'
\end{verbatim}

\begin{verbatim}
## [1] 36.99178
\end{verbatim}

Next, you can tell your students to modify the function so that the user determines whether age should be reported in years, months, days, hours, etc. In other words, the \texttt{unit} argumenst should be entered by user but its default value is in days.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{age_calc <-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(bday, }\DataTypeTok{unit =} \StringTok{"day"}\NormalTok{)\{}
    \KeywordTok{warning}\NormalTok{(}\StringTok{"Please enter the date as 'yyyy-mm-dd'"}\NormalTok{)}
\NormalTok{    bday =}\StringTok{ }\KeywordTok{ymd}\NormalTok{(bday)}
\NormalTok{    today =}\StringTok{ }\KeywordTok{Sys.Date}\NormalTok{()}
\NormalTok{    dif =}\StringTok{ }\KeywordTok{time_length}\NormalTok{(today }\OperatorTok{-}\StringTok{ }\NormalTok{bday, }\DataTypeTok{unit =}\NormalTok{ unit)}
    \KeywordTok{return}\NormalTok{(dif)}
\NormalTok{\}}
\KeywordTok{age_calc}\NormalTok{(}\StringTok{"1982-05-10"}\NormalTok{, }\DataTypeTok{unit =} \StringTok{"hour"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning in age_calc("1982-05-10", unit = "hour"): Please enter the date as
## 'yyyy-mm-dd'
\end{verbatim}

\begin{verbatim}
## [1] 324048
\end{verbatim}

As the last step, show this function to your students and ask them to gues what the ouput will look like without running the function in R.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{age_calc <-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(bday, }\DataTypeTok{unit =} \StringTok{"day"}\NormalTok{)\{}
    \KeywordTok{warning}\NormalTok{(}\StringTok{"Please enter the date as 'yyyy-mm-dd'"}\NormalTok{)}
\NormalTok{    bday =}\StringTok{ }\KeywordTok{ymd}\NormalTok{(bday)}
\NormalTok{    today =}\StringTok{ }\KeywordTok{Sys.Date}\NormalTok{()}
\NormalTok{    dif =}\StringTok{ }\KeywordTok{round}\NormalTok{(}\KeywordTok{time_length}\NormalTok{(today }\OperatorTok{-}\StringTok{ }\NormalTok{bday, }\DataTypeTok{unit =}\NormalTok{ unit), }\DecValTok{1}\NormalTok{)}
    \KeywordTok{print}\NormalTok{(}\KeywordTok{paste}\NormalTok{(}\StringTok{"You are "}\NormalTok{, dif, }\StringTok{" "}\NormalTok{, unit, }\StringTok{"s "}\NormalTok{, }\StringTok{"old"}\NormalTok{, }\DataTypeTok{sep=}\StringTok{""}\NormalTok{))}
\NormalTok{\}}
\KeywordTok{age_calc}\NormalTok{(}\StringTok{"1982-05-10"}\NormalTok{, }\DataTypeTok{unit =} \StringTok{"year"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning in age_calc("1982-05-10", unit = "year"): Please enter the date as
## 'yyyy-mm-dd'
\end{verbatim}

\begin{verbatim}
## [1] "You are 37 years old"
\end{verbatim}

\hypertarget{visualization}{%
\chapter*{Course 7: Data Visualization}\label{visualization}}
\addcontentsline{toc}{chapter}{Course 7: Data Visualization}

\hypertarget{exercise-1-visualizing-nba-finals-data}{%
\section*{Exercise 1: Visualizing NBA Finals Data}\label{exercise-1-visualizing-nba-finals-data}}
\addcontentsline{toc}{section}{Exercise 1: Visualizing NBA Finals Data}

In this exercise we will work with \href{https://www.kaggle.com/daverosenman/nba-finals-team-stats}{NBA final teams stats} on Kaggle. We have used this data before in the \ref{tidying} course. There is two .csv files. The `champs.csv' file contains game-by-game team totals for the championship team from every finals game between 1980 and 2017. The `runnerups.csv' contains game-by-game team totals for the runner-up team from every finals game between 1980 and 2017. The 1980 NBA Finals was the first Finals series since the NBA added the three point line.

This exercise is inpired by two kernells on Kaggle that can be found \href{https://www.kaggle.com/carterallen/nba-championship-data}{here} and \href{https://www.kaggle.com/daverosenman/nba-finals-three-point-stats-1980-2017}{here}. Ask your stduent to download the data on Kaggle or on our Github repository for this guide.

In order to download data on Kaggle, students are required to create a Kaggle account. They can do so by linking their Google account.

The first step is to import the data into R. Since importing .csv files is in a future lesson, tell your students the commands the need to import the .csv files. We are going to use \texttt{read\_csv} command from the \textbf{readr} package. Ask them to save the two files in two separate objects. Here we called them \texttt{champs} and \texttt{runners}. Like before, we will tidy the data a bit to fix the team name issues and converting the columns \texttt{Win} and \texttt{Home} to factors.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{knitr}\OperatorTok{::}\NormalTok{opts_chunk}\OperatorTok{$}\KeywordTok{set}\NormalTok{(}\DataTypeTok{echo =} \OtherTok{TRUE}\NormalTok{)}
\KeywordTok{library}\NormalTok{(tidyverse)}
\CommentTok{# importing the data}
\NormalTok{champs <-}\StringTok{ }\KeywordTok{read_csv}\NormalTok{(}\DataTypeTok{file =} \StringTok{"./data/nba/championsdata.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Parsed with column specification:
## cols(
##   .default = col_double(),
##   Team = col_character()
## )
\end{verbatim}

\begin{verbatim}
## See spec(...) for full column specifications.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{runners <-}\StringTok{ }\KeywordTok{read_csv}\NormalTok{(}\DataTypeTok{file =} \StringTok{"./data/nba/runnerupsdata.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Parsed with column specification:
## cols(
##   .default = col_double(),
##   Team = col_character()
## )
## See spec(...) for full column specifications.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# fix the heat and warriors}
\NormalTok{champs <-}\StringTok{ }\NormalTok{champs }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Team =} \KeywordTok{ifelse}\NormalTok{(Team }\OperatorTok{==}\StringTok{ "Warriorrs"}\NormalTok{,}\StringTok{"Warriors"}\NormalTok{,Team)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Team =} \KeywordTok{ifelse}\NormalTok{(Team }\OperatorTok{==}\StringTok{ "'Heat'"}\NormalTok{,}\StringTok{"Heat"}\NormalTok{,Team)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Win =} \KeywordTok{as.factor}\NormalTok{(Win)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Home =} \KeywordTok{as.factor}\NormalTok{(Home))}

\NormalTok{runners <-}\StringTok{ }\NormalTok{runners }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Team =} \KeywordTok{ifelse}\NormalTok{(Team }\OperatorTok{==}\StringTok{ "Warriorrs"}\NormalTok{,}\StringTok{"Warriors"}\NormalTok{,Team)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Team =} \KeywordTok{ifelse}\NormalTok{(Team }\OperatorTok{==}\StringTok{ "'Heat'"}\NormalTok{,}\StringTok{"Heat"}\NormalTok{,Team)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Win =} \KeywordTok{as.factor}\NormalTok{(Win)) }\OperatorTok{%>%}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Home =} \KeywordTok{as.factor}\NormalTok{(Home))}
\CommentTok{## bind the two data sets together}
\CommentTok{## and add a column that shows champions vs. runnerups call it rank}
\NormalTok{allteams <-}\StringTok{ }\KeywordTok{bind_rows}\NormalTok{(}\StringTok{"Champion"}\NormalTok{ =}\StringTok{ }\NormalTok{champs, }\StringTok{"Runner"}\NormalTok{ =}\StringTok{ }\NormalTok{runners, }\DataTypeTok{.id =} \StringTok{"rank"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

After importing and wrangling the data, ask your students to figure out whether \emph{champion} teams are likely to score more at home or away. Ask them to write the code in a pipe and present the table using the \textbf{knitr} package.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{## loading the knitr package}
\KeywordTok{library}\NormalTok{(knitr)}
\CommentTok{## does home has an advantage}
\NormalTok{allteams }\OperatorTok{%>%}
\StringTok{    }\CommentTok{## first filtering so we only look at champion teams}
\StringTok{    }\KeywordTok{filter}\NormalTok{(rank }\OperatorTok{==}\StringTok{ "Champion"}\NormalTok{) }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\CommentTok{## grouping by the variable home}
\StringTok{    }\KeywordTok{group_by}\NormalTok{(Home) }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\CommentTok{## calculating the average of points scored}
\StringTok{    }\KeywordTok{summarise}\NormalTok{(}\DataTypeTok{avg =} \KeywordTok{mean}\NormalTok{(PTS)) }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\CommentTok{## presenting the table using the knitr package}
\StringTok{    }\KeywordTok{kable}\NormalTok{(}\StringTok{"html"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Home

avg

0

98.21101

1

103.31532

Ask your students what this means. To make the table above make more sense, ask your students to use the appropriate function for changing factor levels so that the column \texttt{Home} is equal to \texttt{Home} if its value is \texttt{1} and is equal to \texttt{Away} if its value is \texttt{0}. Your students should use the function \texttt{fct\_recode()} in order to do that. Now they know that champion teams on average score 98.2 points at away games and 103.3 points at home games.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{## loading the knitr package}
\KeywordTok{library}\NormalTok{(knitr)}
\CommentTok{## does home has an advantage}
\NormalTok{allteams }\OperatorTok{%>%}
\StringTok{    }\CommentTok{## first filtering so we only look at champion teams}
\StringTok{    }\KeywordTok{filter}\NormalTok{(rank }\OperatorTok{==}\StringTok{ "Champion"}\NormalTok{) }\OperatorTok{%>%}
\StringTok{    }\CommentTok{## changing factor levels so they mean better}
\StringTok{    }\KeywordTok{mutate}\NormalTok{(}\DataTypeTok{Home =} \KeywordTok{fct_recode}\NormalTok{(Home, }\DataTypeTok{Home =} \StringTok{"1"}\NormalTok{, }\DataTypeTok{Away =} \StringTok{"0"}\NormalTok{)) }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\CommentTok{## grouping by the variable home}
\StringTok{    }\KeywordTok{group_by}\NormalTok{(Home) }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\CommentTok{## calculating the average of points scored}
\StringTok{    }\KeywordTok{summarise}\NormalTok{(}\DataTypeTok{avg =} \KeywordTok{mean}\NormalTok{(PTS)) }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\CommentTok{## presenting the table using the knitr package}
\StringTok{    }\KeywordTok{kable}\NormalTok{(}\StringTok{"html"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Home

avg

Away

98.21101

Home

103.31532

Now, we are going to do some data visualization using the package \textbf{ggplot2}. Ask them to first find the column that contains the three point field goals from the data guide. The column is \texttt{TP}. Then ask them to show the average number of three points per year using a bar plot. Note that they will have to use the \texttt{geom\_bar()} function from the \textbf{ggplot2} package. Ask them to use the title ``NBA Finals, 1980-2018'' as the title of the graph and ``Average Three Point Field Goals'' as the label for the Y axis. Note that they will have to use the argument \texttt{stat\ =\ \textquotesingle{}identity\textquotesingle{}} inside the \texttt{geom\_bar()} function.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ggplot}\NormalTok{(}\DataTypeTok{data =}\NormalTok{ allteams, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ Year, }\DataTypeTok{y =}\NormalTok{ TP)) }\OperatorTok{+}\StringTok{ }
\StringTok{    }\KeywordTok{geom_bar}\NormalTok{(}\DataTypeTok{stat =} \StringTok{'identity'}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"NBA Finals, 1980-2018"}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\KeywordTok{ylab}\NormalTok{(}\StringTok{'Average Three Point Field Goals'}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\includegraphics{cbds_instructors_files/figure-latex/unnamed-chunk-61-1.pdf}

Now, ask them two repeat the pervious graph but this time, have the bar plot (with different colors) for champion and runner up teams. In other words, they will have to use the argument \texttt{fill} and make it equal to the newly created column \texttt{rank}. Then ask them to interpret the graph. What is obvious is that champion teams do a much better job at three-pointers.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(}\DataTypeTok{data =}\NormalTok{ allteams, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ Year, }\DataTypeTok{y =}\NormalTok{ TP, }\DataTypeTok{fill =}\NormalTok{ rank)) }\OperatorTok{+}\StringTok{ }
\StringTok{    }\KeywordTok{geom_bar}\NormalTok{(}\DataTypeTok{stat =} \StringTok{'identity'}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\KeywordTok{ggtitle}\NormalTok{(}\StringTok{"NBA Finals, 1980-2018"}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\KeywordTok{ylab}\NormalTok{(}\StringTok{'Average Three Point Field Goals'}\NormalTok{)}
\NormalTok{p}
\end{Highlighting}
\end{Shaded}

\includegraphics{cbds_instructors_files/figure-latex/unnamed-chunk-62-1.pdf}

Now, ask them to find the right function in \textbf{ggplot2} that makes the Y axix ticks (the years) with an angle (45 degrees). They will have to use the \texttt{theme()} argument and inside it they will have to use the \texttt{element\_text()} function to specify the angle.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p }\OperatorTok{+}\StringTok{ }\KeywordTok{theme}\NormalTok{(}\DataTypeTok{axis.text.x =} \KeywordTok{element_text}\NormalTok{(}\DataTypeTok{angle=}\DecValTok{45}\NormalTok{, }\DataTypeTok{hjust =} \DecValTok{1}\NormalTok{, }\DataTypeTok{vjust =} \DecValTok{1}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics{cbds_instructors_files/figure-latex/unnamed-chunk-63-1.pdf}

In the last exercises, we are going to work with scatter plots. Ask your students have a scatter plot with number of 3 pointers per game on the vertical axis and year on the horizontal axis. Note that the two columns they need to use are \texttt{TP} and \texttt{Year}. Ask them to have two different colors for champions and runner ups. Ask them to make the point sizes equal to 1.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p2 =}\StringTok{ }\KeywordTok{ggplot}\NormalTok{(}\DataTypeTok{data =}\NormalTok{ allteams, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ Year, }\DataTypeTok{y =}\NormalTok{ TP, }\DataTypeTok{color =}\NormalTok{ rank)) }\OperatorTok{+}
\StringTok{    }\KeywordTok{geom_point}\NormalTok{(}\DataTypeTok{size =} \DecValTok{1}\NormalTok{) }\OperatorTok{+}
\StringTok{    }\KeywordTok{ylab}\NormalTok{(}\StringTok{'3 Pointers per game'}\NormalTok{)}

\NormalTok{p2}
\end{Highlighting}
\end{Shaded}

\includegraphics{cbds_instructors_files/figure-latex/unnamed-chunk-64-1.pdf}

Your students are now required to use the \texttt{geom\_smooth()} function from the \textbf{ggplot2} package. This function help your students in seeing patterns. This is an example of the \texttt{geom\_smooth()} function.

\begin{figure}
\centering
\includegraphics{./files/07_visualization_geom_smooth.png}
\caption{\texttt{geom\_smooth()} function, linear approximation}
\end{figure}

When using \texttt{geom\_smooth()}, the argument \texttt{method} has to be specified otherwise its default value will be used. Ask your students to set \texttt{method} as \texttt{\textquotesingle{}loess\textquotesingle{}}). The shaded areas around the lines are the confidence intervals which can be disabled by using the argument \texttt{se\ =\ FALSE}.

geom\_smooth() and stat\_smooth() are effectively aliases: they both use the same arguments. Use stat\_smooth() if you want to display the results with a non-standard geom. Ask students what the two lines suggest? What is the trend over time?

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p2 }\OperatorTok{+}\StringTok{ }\KeywordTok{geom_smooth}\NormalTok{(}\DataTypeTok{method =} \StringTok{'loess'}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{cbds_instructors_files/figure-latex/unnamed-chunk-65-1.pdf}

\hypertarget{getting-data}{%
\chapter*{Course 8: Getting Data}\label{getting-data}}
\addcontentsline{toc}{chapter}{Course 8: Getting Data}

\hypertarget{exercise-1-saving-a-data-frame-as-an-rds-file}{%
\section*{Exercise 1: Saving a data frame as an rds file}\label{exercise-1-saving-a-data-frame-as-an-rds-file}}
\addcontentsline{toc}{section}{Exercise 1: Saving a data frame as an rds file}

Level: Easy

In this exercise, your student will learn how to save a data frame as a rds or rda file. Before, this exercise remind your students about the best practices of web scraping. Too much scraping at higher rates will put pressure on the website servers. There is a great article \href{https://www.scrapehero.com/how-to-prevent-getting-blacklisted-while-scraping/}{here} about the best practices of web scraping.

First ask your students to load the dataset \textbf{mtcars} and save it to an object called \texttt{data}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data <-}\StringTok{ }\NormalTok{mtcars}
\KeywordTok{head}\NormalTok{(data)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
\end{verbatim}

Now ask them to simply save the data frame \texttt{data} as an rds file with the same name. They should use a code similar to

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{saveRDS}\NormalTok{(data, }\DataTypeTok{file =} \StringTok{"data.rds"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

You can also ask them to save the data frame as an rda file:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{save}\NormalTok{(data, }\DataTypeTok{file=}\StringTok{"data.rda"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{exercise-2-scraping-imdb-data}{%
\section*{Exercise 2: Scraping IMDB data}\label{exercise-2-scraping-imdb-data}}
\addcontentsline{toc}{section}{Exercise 2: Scraping IMDB data}

Level: Difficult

In this exercise, your students will practice working with the package \textbf{rvest} and scraping data from the web. We'll more specifically scrape top 250 movies from the website IMDB. This information can be found on this \href{https://www.imdb.com/search/title?genres=drama\&groups=top_250\&sort=user_rating}{link}. Ask your students to load the packages \textbf{rvest}, \textbf{tidyverse} and \textbf{stringr}.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(rvest)}
\KeywordTok{library}\NormalTok{(tidyverse)}
\KeywordTok{library}\NormalTok{(stringr)}
\end{Highlighting}
\end{Shaded}

The first step in using the rvest package and scraping data from the web is to read the content of the webpage we're interested in. For this, we use the function \texttt{read\_html()} from the package \textbf{rvest}. The address above only contains the first 50 movies but we can use similar process for the pages that come after.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{imdb <-}\StringTok{ }\KeywordTok{read_html}\NormalTok{(}\StringTok{"https://www.imdb.com/search/title?genres=drama&groups=top_250&sort=user_rating"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

The object \texttt{imdb} contains all the html content of the page in the form of an \textbf{xml} document that contains the \emph{head} and the \emph{body} of the page. Now, here is the important part. Let's say we would like to make a data frame that has 4 columns. The first column is the name of the movies, the second column is their ratings, the third column is their genres, and the last column is the year the movies are made. We want to make this data frame for the top 50 movies. For scraping different components of a webpage we need to know the CSS \emph{selector} of the specific part of the html file they're scraping.

We are going to use a Chrome Extension called SelectorGadget. SelectorGadget is an open source tool that makes CSS selector generation and discovery on complicated sites a breeze. They should install the Chrome Extension. They can download SelectorGadget Chrome Extension \href{https://chrome.google.com/webstore/detail/selectorgadget/mhjhnkcfbdhnjickkkdbjoemdmbfginb?hl=en}{here}. They can learn more about the SelectorGadget in this \href{https://vimeo.com/52055686}{video}.

So how do we use the SelectorGadget to find the movie title? After installing the extension, ask your students to drag the bookmarklet to their bookmark bar, then go to any page and launch it. A box will open in the bottom right of the website. Ask them to click the title of the first movie on the list which is ``The Shawshank Redemption''. Without clicking, SelectorGadget will show an orange box around the element under which it says \texttt{h3\ a}. This is the CSS selector we need. Now how do we use \textbf{rvest} to choose the selector and read the information with that CSS selector?

\begin{figure}
\centering
\includegraphics{./images/selector_gadget.png}
\caption{SelectorGadget}
\end{figure}

Your students will have to use the function \texttt{html\_nodes()} in order to read information with that style. We will use the selector that we found using SelectorGadget and use the function \texttt{html\_text("h3\ a")} to convert everything into text. Here's what we need to do in order to read the titles of the movies.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{titles <-}\StringTok{ }\NormalTok{imdb }\OperatorTok{%>%}\StringTok{ }
\StringTok{  }\KeywordTok{html_nodes}\NormalTok{(}\StringTok{"h3 a"}\NormalTok{) }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{html_text}\NormalTok{()}
\NormalTok{titles}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "The Shawshank Redemption"                         
##  [2] "The Godfather"                                    
##  [3] "The Dark Knight"                                  
##  [4] "The Godfather: Part II"                           
##  [5] "The Lord of the Rings: The Return of the King"    
##  [6] "Pulp Fiction"                                     
##  [7] "Schindler's List"                                 
##  [8] "12 Angry Men"                                     
##  [9] "Fight Club"                                       
## [10] "The Lord of the Rings: The Fellowship of the Ring"
## [11] "Forrest Gump"                                     
## [12] "The Lord of the Rings: The Two Towers"            
## [13] "Goodfellas"                                       
## [14] "One Flew Over the Cuckoo's Nest"                  
## [15] "Seven Samurai"                                    
## [16] "Interstellar"                                     
## [17] "City of God"                                      
## [18] "Saving Private Ryan"                              
## [19] "The Green Mile"                                   
## [20] "Life Is Beautiful"                                
## [21] "Se7en"                                            
## [22] "Lon: The Professional"                           
## [23] "The Silence of the Lambs"                         
## [24] "It's a Wonderful Life"                            
## [25] "Dangal"                                           
## [26] "Whiplash"                                         
## [27] "The Intouchables"                                 
## [28] "The Prestige"                                     
## [29] "The Departed"                                     
## [30] "The Pianist"                                      
## [31] "Gladiator"                                        
## [32] "American History X"                               
## [33] "The Lion King"                                    
## [34] "Cinema Paradiso"                                  
## [35] "Grave of the Fireflies"                           
## [36] "Apocalypse Now"                                   
## [37] "Casablanca"                                       
## [38] "The Great Dictator"                               
## [39] "Modern Times"                                     
## [40] "City Lights"                                      
## [41] "Your Name."                                       
## [42] "Django Unchained"                                 
## [43] "3 Idiots"                                         
## [44] "Taare Zameen Par"                                 
## [45] "Babam ve Oglum"                                   
## [46] "The Lives of Others"                              
## [47] "Oldeuboi"                                         
## [48] "American Beauty"                                  
## [49] "Braveheart"                                       
## [50] "Once Upon a Time in America"                      
## [51] " "                                                
## [52] " "                                                
## [53] " "                                                
## [54] " "                                                
## [55] " "
\end{verbatim}

The object \texttt{titles} now contains the name of the movies. It should have 50 elements but it has 55. If they check the object they will realize that the last 5 elements are empty. So we should get rid of them. This is what we should do.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{titles <-}\StringTok{ }\NormalTok{titles[titles }\OperatorTok{!=}\StringTok{ " "}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

Note that the object is a vector. We will create separate vectors for ratings, genres, and years and then will at the end create a data frame that contains all the 4 vectors. Now, we will use the SelectorGadget to find the CSS selector for years. The selector for years is \texttt{h3\ span}. So similar to

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{years <-}\StringTok{ }\NormalTok{imdb }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\KeywordTok{html_nodes}\NormalTok{(}\StringTok{"h3 span"}\NormalTok{) }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\KeywordTok{html_text}\NormalTok{()}
\NormalTok{years}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   [1] "1."     "(1994)" "2."     "(1972)" "3."     "(2008)" "4."    
##   [8] "(1974)" "5."     "(2003)" "6."     "(1994)" "7."     "(1993)"
##  [15] "8."     "(1957)" "9."     "(1999)" "10."    "(2001)" "11."   
##  [22] "(1994)" "12."    "(2002)" "13."    "(1990)" "14."    "(1975)"
##  [29] "15."    "(1954)" "16."    "(2014)" "17."    "(2002)" "18."   
##  [36] "(1998)" "19."    "(1999)" "20."    "(1997)" "21."    "(1995)"
##  [43] "22."    "(1994)" "23."    "(1991)" "24."    "(1946)" "25."   
##  [50] "(2016)" "26."    "(2014)" "27."    "(2011)" "28."    "(2006)"
##  [57] "29."    "(2006)" "30."    "(2002)" "31."    "(2000)" "32."   
##  [64] "(1998)" "33."    "(1994)" "34."    "(1988)" "35."    "(1988)"
##  [71] "36."    "(1979)" "37."    "(1942)" "38."    "(1940)" "39."   
##  [78] "(1936)" "40."    "(1931)" "41."    "(2016)" "42."    "(2012)"
##  [85] "43."    "(2009)" "44."    "(2007)" "45."    "(2005)" "46."   
##  [92] "(2006)" "47."    "(2003)" "48."    "(1999)" "49."    "(1995)"
##  [99] "50."    "(1984)"
\end{verbatim}

If they look at the object \texttt{years}, they will notice the peculiar content. The years are in parentheses and there are some other numbers as well. Then their next task is to write code that will only keep inside the parentheses. This is a bit tricky so feel free to give the code below. The function \texttt{str\_match\_all()} and the regex (regular expression) inside it will return everything inside the parentheses but since the output is in the form of a list, they can use the function \texttt{unlist()} to convert the output to a vector. Finally to convert the vector to numbers (since the outuput is the years movies are made and we want them to be numbers) we use the function \texttt{as.numeric()} as they have used many times.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{years <-}\StringTok{ }\NormalTok{years }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\KeywordTok{str_match_all}\NormalTok{(}\StringTok{"(?<=}\CharTok{\textbackslash{}\textbackslash{}}\StringTok{().+?(?=}\CharTok{\textbackslash{}\textbackslash{}}\StringTok{))"}\NormalTok{) }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\KeywordTok{unlist}\NormalTok{() }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\KeywordTok{as.numeric}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

Object \texttt{years} should now look like a clean vector of the years movies are made.

\begin{verbatim}
##  [1] 1994 1972 2008 1974 2003 1994 1993 1957 1999 2001 1994 2002 1990 1975
## [15] 1954 2014 2002 1998 1999 1997 1995 1994 1991 1946 2016 2014 2011 2006
## [29] 2006 2002 2000 1998 1994 1988 1988 1979 1942 1940 1936 1931 2016 2012
## [43] 2009 2007 2005 2006 2003 1999 1995 1984
\end{verbatim}

The following code will scrape genres and ratings from the website.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{genre =}\StringTok{ }\NormalTok{imdb }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\KeywordTok{html_nodes}\NormalTok{(}\StringTok{".genre"}\NormalTok{) }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\KeywordTok{html_text}\NormalTok{() }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\CommentTok{# getting rid of the "\textbackslash{}n" in the strings}
\StringTok{    }\KeywordTok{str_replace_all}\NormalTok{(}\StringTok{"[}\CharTok{\textbackslash{}r\textbackslash{}n}\StringTok{]"}\NormalTok{ , }\StringTok{""}\NormalTok{) }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\CommentTok{# getting rid of the extra spaces in both ends of the strings}
\StringTok{    }\KeywordTok{str_trim}\NormalTok{(}\DataTypeTok{side =} \KeywordTok{c}\NormalTok{(}\StringTok{"both"}\NormalTok{))}

\NormalTok{ratings =}\StringTok{ }\NormalTok{imdb }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\KeywordTok{html_nodes}\NormalTok{(}\StringTok{".mode-advanced strong , .runtime , .genre"}\NormalTok{) }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\KeywordTok{html_text}\NormalTok{() }\OperatorTok{%>%}\StringTok{ }
\StringTok{    }\KeywordTok{as.numeric}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning in function_list[[k]](value): NAs introduced by coercion
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# There are some empty elements so we get rid of them here}
\NormalTok{ratings <-}\StringTok{ }\NormalTok{ratings[}\OperatorTok{!}\KeywordTok{is.na}\NormalTok{(ratings)]}
\end{Highlighting}
\end{Shaded}

Now that all the data is downloaded, ask your students to combine all the vectors in a data frame called \texttt{imdb\_df}. They should know to use the \texttt{data.frame()} function in order to do that.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{imdb_df =}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(titles, years, genre, ratings, }\DataTypeTok{stringsAsFactors =} \OtherTok{FALSE}\NormalTok{)}
\KeywordTok{head}\NormalTok{(imdb_df)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##                                          titles years
## 1                      The Shawshank Redemption  1994
## 2                                 The Godfather  1972
## 3                               The Dark Knight  2008
## 4                        The Godfather: Part II  1974
## 5 The Lord of the Rings: The Return of the King  2003
## 6                                  Pulp Fiction  1994
##                       genre ratings
## 1                     Drama     9.3
## 2              Crime, Drama     9.2
## 3      Action, Crime, Drama     9.0
## 4              Crime, Drama     9.0
## 5 Adventure, Drama, Fantasy     8.9
## 6              Crime, Drama     8.9
\end{verbatim}

They can continue doing this for the rest of the top 250 movies.

\hypertarget{exercise-3-scraping-nba-data-from-espn.com}{%
\section*{Exercise 3: Scraping NBA data from ESPN.com}\label{exercise-3-scraping-nba-data-from-espn.com}}
\addcontentsline{toc}{section}{Exercise 3: Scraping NBA data from ESPN.com}

Level: Difficult

In this exercise, your students will work on another scraping exercise. This time NBA standings from the espn.com website. The link to the webpage we want to scrape is \href{http://www.espn.com/nba/standings}{here}. Note that by the time you will see this exercise, the content of the website might have changed so be aware of that. The changes on the website will likely change the html nodes we need to use. This is the table we would like to scrape the table below:

\begin{figure}
\centering
\includegraphics{./images/nba_espn.png}
\caption{NBA standings on ESPN.com}
\end{figure}

Again, we're gonna use the package \textbf{rvest} for this exercise. If you want to familiarize your students with the basic commands, look at the previous exercise. First, let's use the \texttt{read\_html()} function to scrape the entire webpage.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(rvest)}
\KeywordTok{library}\NormalTok{(tidyverse)}
\KeywordTok{library}\NormalTok{(stringr)}
\NormalTok{nba =}\StringTok{ }\KeywordTok{read_html}\NormalTok{(}\StringTok{"http://www.espn.com/nba/standings"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Now, we need to know the css selector for each column. Again, let's use the \textbf{SelectorGadget} extension on the Chrome browswer to find the CSS selectors. More information on the \textbf{SelectorGadget} extension can be found in the previous exercise.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{## first we will create an empty list}
\NormalTok{column <-}\StringTok{ }\KeywordTok{list}\NormalTok{()}
\ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{1}\OperatorTok{:}\DecValTok{13}\NormalTok{)\{}
\NormalTok{    node =}\StringTok{ }\KeywordTok{paste}\NormalTok{(}\StringTok{".Table2__td:nth-child("}\NormalTok{,i,}\StringTok{") .stat-cell"}\NormalTok{, }\DataTypeTok{sep=}\StringTok{""}\NormalTok{)}
\NormalTok{    a <-}\StringTok{ }\NormalTok{nba }\OperatorTok{%>%}\StringTok{ }
\StringTok{        }\KeywordTok{html_nodes}\NormalTok{(node) }\OperatorTok{%>%}
\StringTok{        }\KeywordTok{html_text}\NormalTok{() }
\NormalTok{    column[[i]] <-}\StringTok{ }\NormalTok{a}
\NormalTok{\}}
\KeywordTok{names}\NormalTok{(column) <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{"W"}\NormalTok{, }\StringTok{"L"}\NormalTok{, }\StringTok{"PCT"}\NormalTok{, }\StringTok{"GB"}\NormalTok{, }\StringTok{"HOME"}\NormalTok{, }\StringTok{"AWAY"}\NormalTok{, }\StringTok{"DIV"}\NormalTok{, }\StringTok{"CONF"}\NormalTok{, }\StringTok{"PPG"}\NormalTok{, }\StringTok{"OPP PPG"}\NormalTok{, }\StringTok{"DIFF"}\NormalTok{, }\StringTok{"STRK"}\NormalTok{, }\StringTok{"L10"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df <-}\StringTok{ }\KeywordTok{as.data.frame}\NormalTok{(column, }\DataTypeTok{stringsAsFactors =} \OtherTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{df <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(column,}\DataTypeTok{stringsAsFactors=}\OtherTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{analysis}{%
\chapter*{Course 9: Data Analysis}\label{analysis}}
\addcontentsline{toc}{chapter}{Course 9: Data Analysis}

\hypertarget{communication}{%
\chapter*{Course 10: Written and Oral Communication in Data Science}\label{communication}}
\addcontentsline{toc}{chapter}{Course 10: Written and Oral Communication in Data Science}

\hypertarget{getting-jobs}{%
\chapter*{Course 11: Getting a Job in Data Science}\label{getting-jobs}}
\addcontentsline{toc}{chapter}{Course 11: Getting a Job in Data Science}

a project on reading indeed jobs in data science

\hypertarget{random}{%
\chapter*{Course 11: Random Stuff}\label{random}}
\addcontentsline{toc}{chapter}{Course 11: Random Stuff}

This is a \emph{sample} book written in \textbf{Markdown}. You can use anything that Pandoc's Markdown supports, e.g., a math equation \(a^2 + b^2 = c^2\).

The \textbf{bookdown} package can be installed from CRAN or Github:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{install.packages}\NormalTok{(}\StringTok{"bookdown"}\NormalTok{)}
\CommentTok{# or the development version}
\CommentTok{# devtools::install_github("rstudio/bookdown")}
\end{Highlighting}
\end{Shaded}

Remember each Rmd file contains one and only one chapter, and a chapter is defined by the first-level heading \texttt{\#}.

To compile this example to PDF, you need XeLaTeX. You are recommended to install TinyTeX (which includes XeLaTeX): \url{https://yihui.name/tinytex/}.

You can label chapter and section titles using \texttt{\{\#label\}} after them, e.g., we can reference Chapter \ref{intro}. If you do not manually label them, there will be automatic labels anyway, e.g., Chapter \ref{methods}.

\hypertarget{classroom-activity-1}{%
\section*{Classroom activity 1}\label{classroom-activity-1}}
\addcontentsline{toc}{section}{Classroom activity 1}

Figures and tables with captions will be placed in \texttt{figure} and \texttt{table} environments, respectively.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{par}\NormalTok{(}\DataTypeTok{mar =} \KeywordTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{4}\NormalTok{, }\FloatTok{.1}\NormalTok{, }\FloatTok{.1}\NormalTok{))}
\KeywordTok{plot}\NormalTok{(pressure, }\DataTypeTok{type =} \StringTok{'b'}\NormalTok{, }\DataTypeTok{pch =} \DecValTok{19}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}

{\centering \includegraphics[width=0.8\linewidth]{cbds_instructors_files/figure-latex/nice-fig-1} 

}

\caption{Here is a nice figure!}\label{fig:nice-fig}
\end{figure}

Reference a figure by its code chunk label with the \texttt{fig:} prefix, e.g., see Figure \ref{fig:nice-fig}. Similarly, you can reference tables generated from \texttt{knitr::kable()}, e.g., see Table \ref{tab:nice-tab}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{knitr}\OperatorTok{::}\KeywordTok{kable}\NormalTok{(}
  \KeywordTok{head}\NormalTok{(iris, }\DecValTok{20}\NormalTok{), }\DataTypeTok{caption =} \StringTok{'Here is a nice table!'}\NormalTok{,}
  \DataTypeTok{booktabs =} \OtherTok{TRUE}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{table}[t]

\caption{\label{tab:nice-tab}Here is a nice table!}
\centering
\begin{tabular}{rrrrl}
\toprule
Sepal.Length & Sepal.Width & Petal.Length & Petal.Width & Species\\
\midrule
5.1 & 3.5 & 1.4 & 0.2 & setosa\\
4.9 & 3.0 & 1.4 & 0.2 & setosa\\
4.7 & 3.2 & 1.3 & 0.2 & setosa\\
4.6 & 3.1 & 1.5 & 0.2 & setosa\\
5.0 & 3.6 & 1.4 & 0.2 & setosa\\
\addlinespace
5.4 & 3.9 & 1.7 & 0.4 & setosa\\
4.6 & 3.4 & 1.4 & 0.3 & setosa\\
5.0 & 3.4 & 1.5 & 0.2 & setosa\\
4.4 & 2.9 & 1.4 & 0.2 & setosa\\
4.9 & 3.1 & 1.5 & 0.1 & setosa\\
\addlinespace
5.4 & 3.7 & 1.5 & 0.2 & setosa\\
4.8 & 3.4 & 1.6 & 0.2 & setosa\\
4.8 & 3.0 & 1.4 & 0.1 & setosa\\
4.3 & 3.0 & 1.1 & 0.1 & setosa\\
5.8 & 4.0 & 1.2 & 0.2 & setosa\\
\addlinespace
5.7 & 4.4 & 1.5 & 0.4 & setosa\\
5.4 & 3.9 & 1.3 & 0.4 & setosa\\
5.1 & 3.5 & 1.4 & 0.3 & setosa\\
5.7 & 3.8 & 1.7 & 0.3 & setosa\\
5.1 & 3.8 & 1.5 & 0.3 & setosa\\
\bottomrule
\end{tabular}
\end{table}

You can write citations, too. For example, we are using the \textbf{bookdown} package \citep{R-bookdown} in this sample book, which was built on top of R Markdown and \textbf{knitr} \citep{xie2015}.

\bibliography{book.bib,packages.bib}


\end{document}
